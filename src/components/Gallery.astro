---
import { getCollection } from 'astro:content';
import GalleryItem from './GalleryItem.astro';

const galleryEntries = await getCollection('gallery');
const galleryItems = galleryEntries
  .sort((a, b) => (a.data.order ?? 99) - (b.data.order ?? 99))
  .map((entry) => entry.data);
---

<section class="bg-cream px-4 pt-4 pb-8 md:pt-6 md:pb-12">
  <div class="max-w-4xl mx-auto">
    <h2 class="font-display text-red text-2xl md:text-3xl mb-6 text-center">
      GALLERY
    </h2>

    <!-- Mobile: 2 columns, Desktop: 3 columns -->
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
      {galleryItems.map((item) => (
        <GalleryItem
          src={item.src}
          alt={item.alt}
          caption={item.caption}
        />
      ))}
    </div>
  </div>
</section>
